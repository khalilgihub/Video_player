<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' blob: data: file: local-file:; media-src * file: blob: local-file:; img-src * file: blob: data:; script-src 'self' 'unsafe-inline';">
  <title>Hybrid Player</title>
  <link rel="stylesheet" href="../styles/themes.css">
  <link rel="stylesheet" href="../styles/main.css">
  <link rel="stylesheet" href="../styles/controls.css">
  <link rel="stylesheet" href="../styles/playlist.css">
  <link rel="stylesheet" href="../styles/settings.css">
  <link rel="stylesheet" href="../styles/animations.css">
</head>
<body data-theme="dark">
  
  <!-- ═══ CUSTOM TITLE BAR ═══ -->
  <header id="titlebar" class="titlebar">
    <div class="titlebar-drag">
      <div class="titlebar-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
      </div>
      <span class="titlebar-title" id="titlebarText">Hybrid Player</span>
    </div>
    <div class="titlebar-controls">
      <button class="titlebar-btn" id="btnMinimize" title="Minimize">
        <svg width="12" height="12" viewBox="0 0 12 12"><rect y="5" width="12" height="1.5" fill="currentColor"/></svg>
      </button>
      <button class="titlebar-btn" id="btnMaximize" title="Maximize">
        <svg width="12" height="12" viewBox="0 0 12 12"><rect x="1" y="1" width="10" height="10" rx="1.5" fill="none" stroke="currentColor" stroke-width="1.3"/></svg>
      </button>
      <button class="titlebar-btn titlebar-btn-close" id="btnClose" title="Close">
        <svg width="12" height="12" viewBox="0 0 12 12"><line x1="1" y1="1" x2="11" y2="11" stroke="currentColor" stroke-width="1.5"/><line x1="11" y1="1" x2="1" y2="11" stroke="currentColor" stroke-width="1.5"/></svg>
      </button>
    </div>
  </header>

  <!-- ═══ MAIN CONTENT AREA ═══ -->
  <main class="app-main">

    <!-- ─── Video Container ─── -->
    <div class="video-container" id="videoContainer">
      <!-- mpv renders directly into this container via --wid -->
      <div id="mpvContainer" class="mpv-container"></div>
      <div id="video-curtain" class="video-curtain" aria-hidden="true"></div>
      <div id="networkLoadingSpinner" class="network-loading-spinner hidden" aria-hidden="true">
        <div class="network-loading-ring"></div>
      </div>

      <!-- Welcome Screen / Drop Zone -->
      <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-content">
          <div class="welcome-icon">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="5 3 19 12 5 21 5 3"/>
            </svg>
          </div>
          <h1 class="welcome-title">Hybrid Player</h1>
          <p class="welcome-subtitle">Drop a file here or click to open</p>
          <button class="btn-primary" id="btnOpenFile">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
            Open File
          </button>
          <div class="welcome-recent" id="recentFiles"></div>
        </div>
      </div>

      <!-- Subtitle Overlay -->
      <div class="subtitle-overlay" id="subtitleOverlay"></div>

      <!-- Stats Overlay -->
      <div class="stats-overlay" id="statsOverlay" hidden>
        <div class="stats-content">
          <div class="stat-row"><span>Resolution:</span><span id="statResolution">-</span></div>
          <div class="stat-row"><span>Bitrate:</span><span id="statBitrate">-</span></div>
          <div class="stat-row"><span>Dropped Frames:</span><span id="statDropped">-</span></div>
          <div class="stat-row"><span>FPS:</span><span id="statFps">-</span></div>
          <div class="stat-row"><span>Codec:</span><span id="statCodec">-</span></div>
          <div class="stat-row"><span>Speed:</span><span id="statSpeed">-</span></div>
          <div class="stat-row"><span>Buffer:</span><span id="statBuffer">-</span></div>
        </div>
      </div>

      <!-- A-B Loop Indicator -->
      <div class="ab-loop-indicator" id="abLoopIndicator" hidden>
        <span>A-B Loop Active</span>
      </div>

      <!-- ─── Control Bar ─── -->
      <div class="controls-wrapper" id="controlsWrapper">
        <!-- Progress Bar -->
        <div class="progress-bar-container" id="progressContainer">
          <div class="progress-buffer" id="progressBuffer"></div>
          <div class="progress-fill" id="progressFill">
            <div class="progress-handle" id="progressHandle"></div>
          </div>
          <div class="progress-hover-thumb" id="hoverThumb" hidden>
            <img id="hoverThumbImg" width="160" height="90" alt="">
            <span id="hoverThumbTime">0:00</span>
          </div>
          <!-- Chapter markers -->
          <div class="chapter-markers" id="chapterMarkers"></div>
        </div>

        <!-- Control Buttons -->
        <div class="controls-bar">
          <!-- Left Controls -->
          <div class="controls-left">
            <button class="ctrl-btn" id="btnPrev" title="Previous (P)">
              <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
            </button>
            <button class="ctrl-btn ctrl-btn-play" id="btnPlay" title="Play (Space)">
              <svg class="icon-play" viewBox="0 0 24 24" width="32" height="32" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
              <svg class="icon-pause" viewBox="0 0 24 24" width="32" height="32" fill="currentColor" style="display:none"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
            </button>
            <button class="ctrl-btn" id="btnNext" title="Next (N)">
              <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
            </button>

            <!-- Volume (YouTube-style: icon + horizontal slider) -->
            <div class="volume-container" id="volumeContainer">
              <button class="ctrl-btn" id="btnVolume" title="Volume (M)">
                <svg class="icon-vol-high" viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                <svg class="icon-vol-low" viewBox="0 0 24 24" width="22" height="22" fill="currentColor" style="display:none"><path d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"/></svg>
                <svg class="icon-vol-mute" viewBox="0 0 24 24" width="22" height="22" fill="currentColor" style="display:none"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>
              </button>
              <div class="volume-slider-track" id="volumeSliderTrack">
                <input type="range" id="volumeSlider" class="volume-slider-horizontal" min="0" max="100" value="100">
              </div>
              <span class="volume-value" id="volumeValue">100%</span>
            </div>

            <div class="time-display">
              <span id="currentTime">0:00</span>
              <span class="time-separator">/</span>
              <span id="totalTime">0:00</span>
            </div>
          </div>

          <!-- Right Controls -->
          <div class="controls-right">
            <!-- Speed -->
            <button class="ctrl-btn ctrl-btn-text" id="btnSpeed" title="Playback Speed">
              <span id="speedLabel">1x</span>
            </button>

            <!-- Volume is now in controls-left (YouTube-style) -->

            <!-- Equalizer -->
            <button class="ctrl-btn" id="btnEqualizer" title="Equalizer (E)">
              <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M10 20h4V4h-4v16zm-6 0h4v-8H4v8zM16 9v11h4V9h-4z"/></svg>
            </button>

            <!-- Subtitles -->
            <button class="ctrl-btn" id="btnSubtitles" title="Subtitles (C)">
              <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12zM6 10h2v2H6v-2zm0 4h8v2H6v-2zm10 0h2v2h-2v-2zm-6-4h8v2h-8v-2z"/></svg>
            </button>

            <!-- A-B Loop -->
            <button class="ctrl-btn" id="btnABLoop" title="A-B Loop (L)">
              <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 1l4 4-4 4"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/><path d="M7 23l-4-4 4-4"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/></svg>
            </button>

            <!-- Screenshot -->
            <button class="ctrl-btn" id="btnScreenshot" title="Screenshot (Ctrl+S)">
              <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>
            </button>

            <!-- Playlist Toggle -->
            <button class="ctrl-btn" id="btnPlaylist" title="Playlist (Ctrl+L)">
              <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/></svg>
            </button>

            <!-- Settings -->
            <div class="youtube-quality-control" id="youtubeQualityControl" hidden>
              <button class="ctrl-btn ctrl-btn-text" id="btnYoutubeQuality" title="Quality">Auto</button>
              <div class="quality-dropdown" id="youtubeQualityDropdown" hidden>
                <div class="quality-dropdown-list" id="youtubeQualityList"></div>
              </div>
            </div>

            <!-- Settings -->
            <button class="ctrl-btn" id="btnSettings" title="Settings (Ctrl+,)">
              <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/></svg>
            </button>

            <!-- Fullscreen -->
            <button class="ctrl-btn" id="btnFullscreen" title="Fullscreen (F)">
              <svg class="icon-fullscreen-enter" viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
              <svg class="icon-fullscreen-exit" viewBox="0 0 24 24" width="22" height="22" fill="currentColor" style="display:none"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/></svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ─── Sidebar Playlist ─── -->
    <aside class="sidebar-playlist" id="sidebarPlaylist">
      <div class="sidebar-header">
        <h3>Playlist</h3>
        <div class="sidebar-actions">
          <button class="sidebar-btn" id="btnAddToPlaylist" title="Add Files">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
          </button>
          <button class="sidebar-btn" id="btnClearPlaylist" title="Clear Playlist">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
          </button>
          <button class="sidebar-btn" id="btnClosePlaylist" title="Close">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
          </button>
        </div>
      </div>
      <div class="sidebar-search">
        <input type="text" id="playlistSearch" placeholder="Search playlist..." class="sidebar-search-input">
      </div>
      <div class="playlist-items" id="playlistItems"></div>
      <div class="sidebar-footer">
        <span id="playlistCount">0 items</span>
        <span id="playlistDuration"></span>
      </div>
    </aside>
  </main>

  <!-- ═══ EQUALIZER PANEL ═══ -->
  <div class="modal-overlay" id="equalizerModal" hidden>
    <div class="modal-panel equalizer-panel">
      <div class="modal-header">
        <h3>Audio Equalizer</h3>
        <button class="modal-close" data-close-modal="equalizerModal">&times;</button>
      </div>
      <div class="equalizer-presets">
        <select id="eqPresetSelect" class="select-input">
          <option value="flat">Flat</option>
          <option value="bass-boost">Bass Boost</option>
          <option value="treble-boost">Treble Boost</option>
          <option value="vocal">Vocal</option>
          <option value="rock">Rock</option>
          <option value="pop">Pop</option>
          <option value="jazz">Jazz</option>
          <option value="classical">Classical</option>
          <option value="electronic">Electronic</option>
          <option value="custom">Custom</option>
        </select>
      </div>
      <div class="equalizer-bands" id="equalizerBands">
        <!-- 10 bands generated by JS -->
      </div>
      <div class="equalizer-actions">
        <button class="btn-secondary" id="eqReset">Reset</button>
      </div>
    </div>
  </div>

  <!-- ═══ SPEED PANEL ═══ -->
  <div class="modal-overlay speed-panel-overlay" id="speedModal" hidden>
    <div class="modal-panel speed-panel">
      <div class="modal-header">
        <h3>Playback Speed</h3>
        <button class="modal-close" data-close-modal="speedModal">&times;</button>
      </div>
      <div class="speed-options">
        <button class="speed-btn" data-speed="0.25">0.25x</button>
        <button class="speed-btn" data-speed="0.5">0.5x</button>
        <button class="speed-btn" data-speed="0.75">0.75x</button>
        <button class="speed-btn active" data-speed="1">Normal</button>
        <button class="speed-btn" data-speed="1.25">1.25x</button>
        <button class="speed-btn" data-speed="1.5">1.5x</button>
        <button class="speed-btn" data-speed="1.75">1.75x</button>
        <button class="speed-btn" data-speed="2">2x</button>
        <button class="speed-btn" data-speed="3">3x</button>
        <button class="speed-btn" data-speed="4">4x</button>
      </div>
      <div class="speed-custom">
        <label>Custom Speed</label>
        <input type="range" id="customSpeedSlider" min="0.1" max="4" step="0.05" value="1" class="range-input">
        <span id="customSpeedValue">1.00x</span>
      </div>
    </div>
  </div>

  <!-- ═══ SUBTITLE PANEL ═══ -->
  <div class="modal-overlay" id="subtitleModal" hidden>
    <div class="modal-panel subtitle-panel">
      <div class="modal-header">
        <h3>Subtitles</h3>
        <button class="modal-close" data-close-modal="subtitleModal">&times;</button>
      </div>
      <div class="subtitle-options">
        <div class="subtitle-section">
          <h4>Subtitle Track</h4>
          <div id="subtitleTracks" class="subtitle-track-list">
            <button class="subtitle-track-btn active" data-track="off">Off</button>
          </div>
          <button class="btn-secondary" id="btnLoadSubtitle">Load External Subtitle</button>
        </div>
        <div class="subtitle-section">
          <h4>Sync Adjustment</h4>
          <div class="subtitle-sync">
            <button class="btn-small" id="subSyncMinus">-100ms</button>
            <span id="subSyncValue">0ms</span>
            <button class="btn-small" id="subSyncPlus">+100ms</button>
          </div>
        </div>
        <div class="subtitle-section">
          <h4>Appearance</h4>
          <div class="setting-row">
            <label>Font Size</label>
            <input type="range" id="subFontSize" min="12" max="64" value="28" class="range-input">
            <span id="subFontSizeVal">28px</span>
          </div>
          <div class="setting-row">
            <label>Font Color</label>
            <input type="color" id="subFontColor" value="#ffffff" class="color-input">
          </div>
          <div class="setting-row">
            <label>Background</label>
            <input type="color" id="subBgColor" value="#000000" class="color-input">
            <input type="range" id="subBgOpacity" min="0" max="100" value="60" class="range-input range-small">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ═══ SETTINGS MODAL ═══ -->
  <div class="modal-overlay" id="settingsModal" hidden>
    <div class="modal-panel settings-modal">
      <div class="modal-header">
        <h3>Settings</h3>
        <button class="modal-close" data-close-modal="settingsModal">&times;</button>
      </div>
      <div class="settings-body">
        <div class="settings-tabs">
          <button class="settings-tab active" data-tab="general">General</button>
          <button class="settings-tab" data-tab="playback">Playback</button>
          <button class="settings-tab" data-tab="subtitles">Subtitles</button>
          <button class="settings-tab" data-tab="audio">Audio</button>
          <button class="settings-tab" data-tab="advanced">Advanced</button>
        </div>
        <div class="settings-content">
          <!-- General Tab -->
          <div class="settings-pane active" data-pane="general">
            <div class="setting-group">
              <h4>Appearance</h4>
              <div class="setting-row">
                <label>Theme</label>
                <select id="settTheme" class="select-input">
                  <option value="dark">Dark</option>
                  <option value="oled">OLED Black</option>
                  <option value="light">Light</option>
                </select>
              </div>
              <div class="setting-row">
                <label>Accent Color</label>
                <input type="color" id="settAccentColor" value="#e50914" class="color-input">
              </div>
            </div>
            <div class="setting-group">
              <h4>Behavior</h4>
              <div class="setting-row">
                <label>Auto Resume Playback</label>
                <label class="toggle">
                  <input type="checkbox" id="settAutoResume" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>

            <div class="setting-group">
              <h4>Player Actions</h4>
              <div class="settings-actions-list">
                <button type="button" class="settings-action-btn" id="settingsOpenFile">Open File</button>
                <button type="button" class="settings-action-btn" id="settingsOpenMultiple">Open Multiple Files</button>
                <button type="button" class="settings-action-btn" id="settingsOpenFolder">Open Folder</button>
                <button type="button" class="settings-action-btn" id="settingsOpenStream">Open Network Stream</button>
                <button type="button" class="settings-action-btn settings-action-btn-danger" id="settingsQuitPlayer">Quit Player</button>
              </div>
            </div>
          </div>

          <!-- Playback Tab -->
          <div class="settings-pane" data-pane="playback">
            <div class="setting-group">
              <h4>Playback</h4>
              <div class="setting-row">
                <label>Default Speed</label>
                <select id="settDefaultSpeed" class="select-input">
                  <option value="0.5">0.5x</option>
                  <option value="0.75">0.75x</option>
                  <option value="1" selected>1x (Normal)</option>
                  <option value="1.25">1.25x</option>
                  <option value="1.5">1.5x</option>
                  <option value="2">2x</option>
                </select>
              </div>
              <div class="setting-row">
                <label>Hardware Acceleration</label>
                <label class="toggle">
                  <input type="checkbox" id="settHwAccel" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
          </div>

          <!-- Subtitles Tab -->
          <div class="settings-pane" data-pane="subtitles">
            <div class="setting-group">
              <h4>Default Subtitle Style</h4>
              <div class="setting-row">
                <label>Font Family</label>
                <select id="settSubFont" class="select-input">
                  <option value="Segoe UI">Segoe UI</option>
                  <option value="Arial">Arial</option>
                  <option value="Roboto">Roboto</option>
                  <option value="Helvetica">Helvetica</option>
                  <option value="Consolas">Consolas</option>
                </select>
              </div>
              <div class="setting-row">
                <label>Font Size</label>
                <input type="range" id="settSubSize" min="12" max="64" value="28" class="range-input">
                <span id="settSubSizeVal">28px</span>
              </div>
              <div class="setting-row">
                <label>Font Color</label>
                <input type="color" id="settSubColor" value="#ffffff" class="color-input">
              </div>
            </div>
          </div>

          <!-- Audio Tab -->
          <div class="settings-pane" data-pane="audio">
            <div class="setting-group">
              <h4>Audio</h4>
              <div class="setting-row">
                <label>Volume Normalization</label>
                <label class="toggle">
                  <input type="checkbox" id="settVolNorm">
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
          </div>

          <!-- Advanced Tab -->
          <div class="settings-pane" data-pane="advanced">
            <div class="setting-group">
              <h4>Advanced</h4>
              <div class="setting-row">
                <label>Cache Size (MB)</label>
                <input type="number" id="settCacheSize" value="150" min="50" max="1000" class="number-input">
              </div>
              <div class="setting-row">
                <label>Debug Logs</label>
                <label class="toggle">
                  <input type="checkbox" id="settDebugLogs">
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ═══ SLEEP TIMER MODAL ═══ -->
  <div class="modal-overlay" id="sleepTimerModal" hidden>
    <div class="modal-panel modal-small">
      <div class="modal-header">
        <h3>Sleep Timer</h3>
        <button class="modal-close" data-close-modal="sleepTimerModal">&times;</button>
      </div>
      <div class="sleep-timer-options">
        <button class="speed-btn" data-sleep="15">15 min</button>
        <button class="speed-btn" data-sleep="30">30 min</button>
        <button class="speed-btn" data-sleep="45">45 min</button>
        <button class="speed-btn" data-sleep="60">1 hr</button>
        <button class="speed-btn" data-sleep="90">1.5 hr</button>
        <button class="speed-btn" data-sleep="120">2 hr</button>
        <button class="speed-btn" data-sleep="0">Off</button>
      </div>
      <div class="sleep-timer-status" id="sleepTimerStatus"></div>
    </div>
  </div>

  <!-- ═══ NETWORK STREAM MODAL ═══ -->
  <div class="modal-overlay" id="networkStreamModal" hidden>
    <div class="modal-panel modal-small network-stream-modal">
      <div class="modal-header">
        <h3>Open Network Stream</h3>
        <button class="modal-close" data-close-modal="networkStreamModal">&times;</button>
      </div>
      <form id="networkStreamForm" class="network-stream-body">
        <label for="networkStreamInput" class="network-stream-label">Stream URL</label>
        <input
          id="networkStreamInput"
          class="network-stream-input"
          type="url"
          placeholder="https://example.com/stream.m3u8"
          autocomplete="off"
          required
        >
        <div class="network-stream-actions">
          <button type="button" class="btn-secondary" id="btnCancelNetworkStream">Cancel</button>
          <button type="submit" class="btn-primary">Play</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ═══ TOAST NOTIFICATIONS ═══ -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- ═══ SCRIPTS ═══ -->
  <script src="../components/toast.js"></script>
  <script src="../components/modal.js"></script>
  <script src="../services/database.js"></script>
  <script src="../services/preferences.js"></script>
  <script src="../renderer/modules/cursor-manager.js"></script>
  <script src="../renderer/modules/player.js"></script>
  <script src="../renderer/modules/controls.js"></script>
  <script src="../renderer/modules/playlist.js"></script>
  <script src="../renderer/modules/subtitles.js"></script>
  <script src="../renderer/modules/equalizer.js"></script>
  <script src="../renderer/modules/settings.js"></script>
  <script src="../renderer/modules/shortcuts.js"></script>
  <script src="../renderer/modules/thumbnails.js"></script>
  <script src="../renderer/modules/gestures.js"></script>
  <script src="../renderer/app.js"></script>
</body>
</html>
